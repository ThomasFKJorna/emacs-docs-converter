<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 27.2.

Copyright (C) 1990-1996, 1998-2021 Free Software Foundation,
Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<!-- Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<link rev="made" href="mailto:bug-gnu-emacs@gnu.org">
<link rel="icon" type="image/png" href="/graphics/gnu-head-mini.png">
<meta name="ICBM" content="42.256233,-71.006581">
<meta name="DC.title" content="gnu.org">

<style type="text/css">
@import url('/software/emacs/manual.css');
</style>
</head>

<body lang="en">
<span id="JSONRPC-deferred-requests"></span><div class="header" style="background-color:#DDDDFF">
<p>
Previous: <a href="JSONRPC-JSON-object-format.html" accesskey="p" rel="prev">JSONRPC JSON object format</a>, Up: <a href="JSONRPC.html" accesskey="u" rel="up">JSONRPC</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>

<span id="Deferred-JSONRPC-requests"></span><h4 class="subsection">32.30.4 Deferred JSONRPC requests</h4>
<span id="index-JSONRPC-deferred-requests"></span>

<p>In many <acronym>RPC</acronym> situations, synchronization between the two
communicating endpoints is a matter of correctly designing the RPC
application: when synchronization is needed, requests (which are
blocking) should be used; when it isn&rsquo;t, notifications should suffice.
However, when Emacs acts as one of these endpoints, asynchronous
events (e.g. timer- or process-related) may be triggered while there
is still uncertainty about the state of the remote endpoint.
Furthermore, acting on these events may only sometimes demand
synchronization, depending on the event&rsquo;s specific nature.
</p>
<span id="index-_003adeferred_002c-JSONRPC-keyword"></span>
<p>The <code>:deferred</code> keyword argument to <code>jsonrpc-request</code> and
<code>jsonrpc-async-request</code> is designed to let the caller indicate
that the specific request needs synchronization and its actual
issuance may be delayed to the future, until some condition is
satisfied.  Specifying <code>:deferred</code> for a request doesn&rsquo;t mean it
<em>will</em> be delayed, only that it <em>can</em> be.  If the request
isn&rsquo;t sent immediately, <code>jsonrpc</code> will make renewed efforts to
send it at certain key times during communication, such as when
receiving or sending other messages to the endpoint.
</p>
<span id="index-jsonrpc_002dconnection_002dready_002dp"></span>
<p>Before any attempt to send the request, the application-specific
conditions are checked.  Since the <code>jsonrpc</code> library can&rsquo;t know
what these conditions are, the program can use the
<code>jsonrpc-connection-ready-p</code> generic function (see <a href="Generic-Functions.html">Generic Functions</a>) to specify them.  The default method for this function
returns <code>t</code>, but you can add overriding methods that return
<code>nil</code> in some situations, based on the arguments passed to it,
which are the <code>jsonrpc-connection</code> object (see <a href="JSONRPC-Overview.html">JSONRPC Overview</a>) and whichever value you passed as the <code>:deferred</code>
keyword argument.
</p>



</body>
</html>
